<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>入门指南 | Foxit PDF SDK For Web - V10.0.0</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script src="/docs/developer-guide/resetHref.js"></script>
    <link rel="icon" href="/docs/developer-guide/favicon.ico">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800">
    <meta name="description" content="Foxit PDF SDK For Web开发文档">
    
    <link rel="preload" href="/docs/developer-guide/assets/css/0.styles.6b862bf6.css" as="style"><link rel="preload" href="/docs/developer-guide/assets/js/app.5496d287.js" as="script"><link rel="preload" href="/docs/developer-guide/assets/js/2.cd9f3c75.js" as="script"><link rel="preload" href="/docs/developer-guide/assets/js/1.f6fc1d0f.js" as="script"><link rel="preload" href="/docs/developer-guide/assets/js/32.2690aeb9.js" as="script"><link rel="prefetch" href="/docs/developer-guide/assets/js/10.8058bde1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/100.72f3e591.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/101.3a9116b1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/102.84b44ee5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/103.ee3cc065.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/104.5b375f63.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/105.98759d6c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/106.85f00cf5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/107.33e09399.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/108.68e8fcea.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/109.86f1b644.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/11.cfc75bee.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/110.3ee08f4d.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/111.26c6cfda.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/112.5ef05737.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/113.4b0141f3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/114.cd010192.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/115.e004ead3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/116.4c1a14e4.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/117.db01bdc0.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/118.d4e8fd89.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/119.1dccfc4c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/12.94a801a0.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/120.2b1088b0.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/121.f7ebc33c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/122.31ec195a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/123.b7c601a8.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/124.ea408aab.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/125.9bd1b158.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/126.4b213e8a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/127.6f3ebd4b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/128.ec1442ac.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/129.7d143029.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/13.45136fef.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/130.f175691b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/131.0531c7ee.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/132.afbc28bc.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/133.f2a14393.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/134.db483f12.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/135.66405677.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/136.524dd812.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/137.9fa4b922.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/138.8435d805.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/139.88f33437.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/14.6e47090b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/140.e06cdde5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/141.45742843.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/142.b371309c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/143.0289db1b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/144.ad49e857.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/145.70af7cbf.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/146.7f3a75e5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/147.bf72a268.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/148.fbd11c37.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/149.e8900638.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/15.513b3c4d.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/150.bc7fbb6c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/151.d102ad93.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/152.b30531ce.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/153.8681a684.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/154.a22b4e11.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/155.c4b3d241.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/156.237190a9.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/157.9804dc64.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/158.06c97db3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/159.c2bcc898.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/16.51dd8fd3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/160.7961a6a1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/161.3d18bdb3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/162.a5c955a9.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/163.6a82d22e.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/164.66140aaa.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/165.69b0a53a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/166.4eff7f6d.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/167.84cc6f26.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/168.992bf2fd.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/169.bb48dc4f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/17.4a982141.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/170.484377e4.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/171.907988e2.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/172.6e86fba3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/173.c4263fc6.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/174.5caf0181.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/175.9c30524b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/176.f49d76de.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/177.476619fd.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/178.6beb151e.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/179.f06aefab.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/18.5c28dac1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/180.183b8a7f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/181.c89a138f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/182.e7e0e932.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/183.940a9414.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/184.15f8ef0f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/185.131efc25.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/186.dd0f95f8.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/187.fa94c642.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/188.396659a1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/189.4b57a887.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/19.af9be205.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/190.cf572247.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/191.2fd92cc4.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/192.ceea88ac.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/193.8d437780.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/194.5a1543d5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/195.e61ed5cf.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/196.a505722f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/197.b850e201.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/198.85a43521.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/199.dc4b4941.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/20.f86c055c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/200.c5f33adc.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/201.66bc65b5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/202.abf0e859.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/203.33fd88e1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/204.040b7232.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/205.41c981fe.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/206.7ff5352c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/207.076ce823.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/21.894f45d2.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/22.a24cf50d.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/23.0e199f94.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/24.1545acd1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/25.eba845e2.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/26.e05a6823.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/27.d07e37be.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/28.fc62f750.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/29.0fd1dd7b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/3.5b5aeeca.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/30.29283867.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/31.773bccce.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/33.a8f8cb07.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/34.6ce97638.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/35.54d00ca7.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/36.4aec399f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/37.996a1b6f.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/38.023d4e78.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/39.eb48db34.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/4.8a3ba3b2.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/40.ef84d6c1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/41.79a11af9.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/42.784c4901.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/43.9f43be3a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/44.0375e0a5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/45.dac98fa9.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/46.931b005c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/47.1565b21a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/48.21bcf972.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/49.71bac77d.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/5.eff11180.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/50.1e2417f7.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/51.a12f00bf.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/52.13e6b6cf.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/53.b4836dab.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/54.ef962c07.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/55.ceb575cd.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/56.35521497.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/57.11a87ad5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/58.68ddad0b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/59.131ca72c.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/6.ad0ec73b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/60.4d66dbd1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/61.27534088.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/62.ae203dc5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/63.c9920f96.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/64.7c465275.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/65.56f01881.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/66.aeb6a715.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/67.e7bd9bb5.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/68.cb02b5ec.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/69.735e8ff6.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/7.eb6d59c3.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/70.c7bf33ab.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/71.9d6f4a28.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/72.985a78db.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/73.5e0b3ebb.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/74.2528ee69.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/75.bea446f1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/76.ddf8ac19.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/77.e127bba1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/78.124cb2b4.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/79.0f3dafa1.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/80.23003b70.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/81.3f670ffe.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/82.a3cbb505.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/83.129ef2c6.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/84.3c69920a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/85.4115f796.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/86.ff1f181b.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/87.7db3b685.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/88.a31f4506.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/89.fc71e9bf.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/90.a20e4dcd.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/91.53cfe523.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/92.9c0bdceb.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/93.cd68ca5a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/94.9be1e260.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/95.b6a54498.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/96.0f7d5244.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/97.3d9bd873.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/98.71885536.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/99.fa6c908a.js"><link rel="prefetch" href="/docs/developer-guide/assets/js/vendors~docsearch.33b2b47d.js">
    <link rel="stylesheet" href="/docs/developer-guide/assets/css/0.styles.6b862bf6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/developer-guide/zh/" class="home-link router-link-active"><!----> <span class="site-name">Foxit PDF SDK For Web - V10.0.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/developer-guide/zh/guides/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/docs/API_Reference/FoxitPDFSDK_API_Reference.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/docs/developer-guide/zh/technical-support/" class="nav-link">
  技术支持
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/@foxitsoftware/gulp-merge-addon" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @foxitsoftware/addon-loader
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/@foxitsoftware/addon-loader" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @foxitsoftware/gulp-merge-addon
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/docs/developer-guide/zh/changelog/changelog7_3_0.html" class="nav-link">
  更新日志
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/developer-guide/main/collaboration/getting-started.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/developer-guide/zh/main/collaboration/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/developer-guide/zh/guides/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/docs/API_Reference/FoxitPDFSDK_API_Reference.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/docs/developer-guide/zh/technical-support/" class="nav-link">
  技术支持
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/@foxitsoftware/gulp-merge-addon" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @foxitsoftware/addon-loader
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/@foxitsoftware/addon-loader" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @foxitsoftware/gulp-merge-addon
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/docs/developer-guide/zh/changelog/changelog7_3_0.html" class="nav-link">
  更新日志
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/developer-guide/main/collaboration/getting-started.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/developer-guide/zh/main/collaboration/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>入门</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>示例工程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>自定义</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>插件化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>功能模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>协同</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/developer-guide/zh/main/collaboration/getting-started.html" aria-current="page" class="active sidebar-link">入门指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/developer-guide/zh/main/collaboration/getting-started.html#快速运行collaboration示例" class="sidebar-link">快速运行collaboration示例</a></li><li class="sidebar-sub-header"><a href="/docs/developer-guide/zh/main/collaboration/getting-started.html#工作原理" class="sidebar-link">工作原理</a></li><li class="sidebar-sub-header"><a href="/docs/developer-guide/zh/main/collaboration/getting-started.html#无线循环问题" class="sidebar-link">无线循环问题</a></li></ul></li></ul></section></li><li><a href="/docs/developer-guide/zh/main/best-practice.html" class="sidebar-link">最佳实践</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>问题处理</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="入门指南"><a href="#入门指南" class="header-anchor">#</a> 入门指南</h1> <h2 id="快速运行collaboration示例"><a href="#快速运行collaboration示例" class="header-anchor">#</a> 快速运行collaboration示例</h2> <p>请参阅 <a href="/docs/developer-guide/zh/main/getting-started/quickly-run-samples.html">快速运行示例</a> 章节启动服务器，然后在浏览器中打开以下地址以访问collaboration示例：</p> <p><a href="http://127.0.0.1:8080/examples/UIExtension/collaboration/index.html" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080/examples/UIExtension/collaboration/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="工作原理"><a href="#工作原理" class="header-anchor">#</a> 工作原理</h2> <p>首先，打开API reference，找到collaboration相关的接口和类，如下所示：</p> <p><img src="/docs/developer-guide/assets/img/collaboration-api-reference-class-list.5310f672.jpg" alt="Collaboration classes list in API reference"></p> <p>其中，关键性的接口是：</p> <ol><li><p><code>CollaborationCommunicator</code></p> <p>该接口是浏览器和服务器之间的通信桥梁。它负责连接服务器、创建协作会话、同步数据等。在 <code>/examples/UIExtension/collaboration</code> 目录下，有一个基于communicator的sockjs，您可以参考其具体的实现，以了解更多详细信息。</p></li> <li><p><code>CollabroationDataHandler</code></p> <p>假设我们有两个客户端设备：客户端 A 和客户端 B。当客户端 A 创建一个注释时，其相关的注释数据将被发送到服务器，进而将进一步转发给客户端 B。当客户端 B 收到数据时，它会立即根据数据内容重复与客户端 A 相同的操作。此时，数据同步就实现了。客户端 B 的上述操作过程由 <code>CollabroationDataHandler</code> 接口实现，其定义了两种方法：</p> <ul><li><p><code>accept(data: CollaborationData): Promise&lt;boolean&gt;</code></p> <p>当接收到数据时，该方法将被调用并用于确认当前 <code>CollaborationDataHandler</code> 接口是否需要对数据进行处理。</p></li> <li><p><code>receive(data: CollaborationData, builtinHandler?: CollaborationDataHandler)</code></p> <p>当 <code>accept()</code> 方法返回true时，此方法将被调用，并传入两个参数。第一个参数是当前收到的协作数据，第二个是内置数据handler。在某些情况下，您需要决定是否调用内置数据handler。当操作行为没有定义在 <code>COLLABORATION_ACTION</code> 时调用了内置数据handler，则会导致不再执行其他同步操作。</p></li></ul></li> <li><p><code>CollaborationSessionInfo</code></p> <p>当客户端打开 PDF 文件时，它将向服务器发送一个创建新会话的请求。该会话包含当前 PDF 文件的信息以及其唯一标识shareId。通过这种方式，当分享带有shareId的链接给其他用户时，其他用户可以打开此链接并查看原始 PDF 文件，以及启动协作会话。</p></li> <li><p><code>UserCustomizeCollaborationData</code></p> <p>我们的 API 设计允许用户自定义协作操作。您可以通过 <code>PDFViewer.collaborate</code> API发送自定义协作数据，然后在自定义的 <code>CollaborationDataHandler</code> 中接收自定义协作数据以执行同步。</p></li> <li><p><code>COLLABORATION_ACTION</code></p> <p>内置协作操作的枚举。</p></li></ol> <p>协作如何工作？下面将详细解释整个过程。</p> <p>备注：Foxit PDF SDK for Web提供的collaboration 示例使用了Node.js作为后端服务器，并使用websocket作为通信通道来建立长时间的协作连接。</p> <ol><li><p>客户端A打开PDF文档，其中文档信息将被发送到服务器，并以唯一的shareID发起一个新的会话。在浏览器中，您将看到如下类似的地址：
<code>http://localhost:8080/examples/UIExtension/collaboration/index.html?shareId=2MF8Rp7-Q</code></p> <iframe frameborder="0" src="https://viewer.diagrams.net/?highlight=0000ff&amp;nav=1&amp;title=#RtVfbbts4EP0aP8bQ1Y4fHTvdXaCLBkiBtk8FbY1l7lKilqRju1%2FfoUhaoqk4Dap9kTiHwxE5Zy7UJF1Vpz8EafZ%2F8wLYJImK0yRdT5JkHs%2FxqYGzAdIkN0ApaGGguAOe6Q%2BwYGTRAy1AeoqKc6Zo44NbXtewVR5GhOBHX23Hmf%2FVhpQQAM9bwkL0Cy3U3qD3ybzD%2FwRa7t2X49nCzFTEKduTyD0p%2BLEHpY%2BTdCU4V2ZUnVbAtO%2BcX8y6D6%2FMXjYmoFa%2FssD6XaqzOxsUeFQrcqH2vOQ1YY8d%2BiD4oS5AG4hQ6nQ%2Bct4gGCP4Dyh1tryRg%2BII7VXF7CycqPqql09zK33rzaxP1nIrnK1g9qk39%2BpJLST5QWytVmKDg4gSrFZ68TJGJ%2FAKlDijigBGFH3xrRMbJ%2BVFzy5dCkHOPYWG01rJnuUnDaCCjfg8nhmLNuCT6IqWN%2FRTXx8HZgdO6h2lg1qqh2m3gfpC2MF5ato6QTa8loDDGo4mPAX8VQwGyUeywaz2iCWMljWOt8gJCAReQCiKebO0ExuuFK90DIGkP8imtafptQ5E4%2FnDJF9fCNcG4DSU1HZxl0r9UMiHSbaGomkcZXPPwdb2%2B6IgoO0unk1zz%2B5d4tvgu53ESPS5fC97ScBeQBCRjSl8O3rSqfrQgKD4Cc3KGq1hpYSnDrpJ4qVGaaIKIveX3JcN2dK6%2FNzmfYoArdrK6d5rWpV4GEY3%2BCRb7dnvBRW4M67d%2BOFIa7Qsv0sQSPRUvpS3iA9y%2FVWCs8XCZze3MXLsqnVmre57hdqpDTHu8XWDnDQgZ8UotFGyDGhC1zZ6eKjYUjullzJtej1xSRXlXupc55TS3u8TyA%2BK0RpWl%2BYXjePVNLoqYvPQq2kUenU2glddPbwV81AXS93cdewyIiXdXrWdGj%2F61TUXLXzrmpAWu87TSq71DLer6Ga70kIvv36jhaVhC0vGaGFB8UoWkU9vesWb2ZVddaN5pW8ZMmcJDL23qabujC7L5%2FmoTTIOu%2BSrCVyBlKb0jZOIs2GKe5mWDGRanI3SxhK%2FN97N%2F4ceFt8POHfG8CAPO95upvPy7L8DdxN3sr1VYimN4qw5dZM4KvV7xRkjGy5IWzfRTNtbnG3cljFvlAM%2BkRSNSyX4v0gc0yV5XfNaM7ujjF1BPbK1WXvjTTInW8PxQNmuaFG012nXbxns1DiFOsv9BLwP63Sc5%2B6m0g%2BgbIxSvQiYjaefGtBkoAv15RLdTyrdtcxTX%2BoEEAUtXVi4NXHDxPQc%2FqscvXkpvTBx3FMFz3in0d884p9r8LMzRhdNfHLibICd2UByJ%2B%2FnBsXuV9Ikafc%2Fnj7%2BBA%3D%3D" style="width:100%;height:274px;"></iframe></li> <li><p>客户端A分享协作链接给其他的客户端，这些客户端在打开链接后将被连接到同一台服务器。</p> <iframe frameborder="0" src="https://viewer.diagrams.net/?highlight=0000ff&amp;layers=1&amp;nav=1&amp;title=#R3Vjfk5s2EP5rmEkfkgHJ4Pjxzs4lmWlnbsadpnnKyCCDJgJRIZ9x%2F%2FquQPwQgvqaOr1JX2z0gVba71vtLnh4m9fvJSmzX0RCuYf8pPbwzkNoHazhVwOXFggxaoFUsqSFggHYsz%2BpAX2DnlhCK%2BtBJQRXrLTBWBQFjZWFESnF2X7sKLi9aklS6gD7mHAX%2FcQSlbXoW7Qe8A%2BUpVm3chBt2js56R42nlQZScR5BOF3Ht5KIVR7lddbyjV3HS%2FtvIeFu%2F3GJC3UcyagVTvjifCTcc5sTF06b6U4FQnVE3wP358zpui%2BJLG%2BewZ5ActUzmEUwKUxR6Wi9eKegt5TiBAqcqrkBR4xE5Bv2DLRgX1D1nngGq%2BM2WzM88o8SIy%2BaW97oAAuDAsLjFwnhFRlG1VHVmte7ksqGSxEJWBgDcKQPg7QmB7CWVrAdQxcNPf6ANDcJqTKeqIr4JgV6a8CGN5hAFjehGX3v2N5Cs5wdoBfEiv2RL8kTMLOhPb44cwKsFx9qagEOd5UT2kvj6PFjGKL8uDQlieYkWdOnfAG4mBHnC1n2hXk3zkyAbWlvjzl%2FE6TAu5rLxmc45%2FJgfJHUTHFhJbjIJQS%2BeiBO6OTEpP4FifFWUG3fWbxb8NqgCKb1WAm6H2X1egGrAbh9ZjvyDxyWt%2FpFApu0yIxl7uYk6pisQ5bRaRyYSdF0MTJsVcTxIiLcIaLDpOUE30c7Lw%2FQ5BZ4VGwJoQ6Kda%2BLcU0rVTiJGNqZo2T68QQDq8YAqpSqhxDjV6928%2BTMHIk%2FEQPlYi%2FUjUUQh3sU2EhPpWtT6Wk%2BAoRzvWR2RWi0EnnyDifQE4umx6enCWJXma2ZthV5RZlA09OkB%2B5eWkmatAtTtDaoX%2FfpN0lup%2FL8UiWoyiUaYWgapuxMRz8HfuOTjcgexWgq0Wgx8Zs36JEB2%2BXywA4F3HN8AG4j1LVu%2FuCheFfhnVoMY3xf1cYuqMxR%2FT2x6YVBy9Ia7BM6%2B4Hp3XzgrTOtDFb5N2vrd%2F%2Fbf1bre2UjKOZvvw71T%2Fk1r%2FFOL7aQY6koDVTv2uK3oRm9NkQpq939Xhw6QYFbH40SQ8%2Fd%2Fb0YJjWjC6WBNfbUnCq6f886wW6beW84RXypbrX1eQEovU3dq8rNOlepy9wt%2Bte0WYmfNoyngVDGW8R3fdYkRX9cRLdjddV0yHBy6AfhGU93OysdBkP%2BacK3q61chnV5kje%2FGUg98ekWws23i5nbwFgd19lBzzuHn5j9Azv3KKkxQPj9P6yb%2B2%2BMvZ%2FGlkqF%2FuUb09N5tsBAOH0S8JrtPQVR0D6OfLmMGaQuWjxXbKUP4mqjZulZo%2FH5p%2BnKRgOX9LasBw%2BR%2BJ3fwE%3D" style="width:100%;height:343px;"></iframe></li> <li><p>例如，客户端A执行创建一个注释的动作，该动作的操作数据将在后台同步发送到服务器，然后转发给其他的客户端。</p> <iframe frameborder="0" src="https://viewer.diagrams.net/?highlight=0000ff&amp;nav=1&amp;title=#R3Vlbc%2BI2FP41zLQPMLblCzw6Jt12Jk0ym8zu9ikjsADN2pYriwD99T3C8kWWCbk4zW5fiHQkHel85x6PUJTuP3Gcb%2F5kMUlGjhXvR2g%2BcpzADuBXEg4lATleSVhzGpckuyHc0X%2BIIlqKuqUxKbSNgrFE0FwnLlmWkaXQaJhzttO3rVii35rjNTEId0ucmNSvNBabkjp1gob%2BO6HrTXWz7c%2FKlRRXm5UkxQbHbNciocsRijhjohyl%2B4gkErsKl%2FLcbydW64dxkonnHEDlgUecbJVs6l3iUAmLi7zEcEX3BI5d5ITTlAjCgQbcAHRy25AuNiJNYMWGIU7oOoPxEl5zXKvFtWAS42IjGR4nRY6XNFvfsxwICAg0PSqh%2Bjun6RrESOgCfvFS0EfyEFMOL2P8AKQdzYBz8VAQ%2Fkj4pHhcw1kTDQUQbBFk3yIpdD4RBmJIhpZaRYHSlDJVe6bmu0bxruK6aencU9uwMrV1zbnRBgyUQvqV4xrKiRIqRXGs0FATQJvL4TZNQgkKiC%2BlpGC1V3hBkltWUEGZVMeCCcHS1oZQ6UlI9NsKZFuR0IxEtR9Zw6Bqo0BD1bFMVJFlouoPgKp33uQrLFcJ2YcyXoDUJIvVcL5McFHQpbRagbkwyS0ET4JFYi3GmFC1oPB6oKhonCRYeoMe5HrwUTfcMnq0oEoTU1vXBOpAXLAtXxJ1qh1JOoyQf4YRQLUmwmB0VFct9rM06Bsa%2FEoWBVt%2BJ6IJ%2BtLUu3oF6xS6egrB2Xew70Q6zDxjmQw5K5okHZIRybquk9I4ltdc7DZUkDuIZvLOHaQ%2FoHG2zeI61A3gP46r%2B489882o1GM0zgD%2BY5thyQC611lasIPk%2FPBN4jEJAqci%2FAWEsTWxgoow3yvIytmhPWulnKdRLe1OS3dnfe%2BtTuU5unqmweucyrV0p7K7AfCEUwH4%2BNDalssNxQse7Ftn3vXkfhiUL3ith9svCNIpKYqyVHhF4qps%2BbzntTzL6fGsitMbLWds6%2BXGuGM4bLUqyFvj53OqvgFTYMvZXTRtOzv4uuUN6uwdz%2B54v%2F%2BRmRbNOgnSdV4XFHxftxHkuu%2BVaXtK0P5UW%2FyguZYzgVXVO1TqtWcd9M3S1faCntzrnLaY5%2BZeZ2row5nIdiCOwyxTsgKcCV4wfpzMscA%2Fvm5mAynHtfS6CCFTOeCIPcoZoDBCZl1qIK8j0IeR0TsY0vdg9EShqMcKd9rTaPX1r7Y7BCKBgUjdwYJ0fiKtcMFhtBa1vB%2FY074Nat%2FXoPbs%2F66nRWZcqIGOfm5YkfuBsM5Owzr%2FuWF1nY%2BDtQot7UAZOaOLQPv9MZPWANB7FtKh76kg3qt5r0L9m5r3PRXfWuOykvfUrCnj5eSgwWZU5z3JvqyCR027Pnh37nbq5%2FqzwksLcc%2FqJNdgqjMaqDvv3lO1x0N121Uj8h7d9hlPcf%2F%2F3bbb122Xpc%2FGbkqfkrJix%2Fc1wPt%2Fb1m1MC6OX8JC2GBP832zWHGxZS8QcYIFkU1B3RFU3OGp5QX6pe0KrN5ovq3Icdb7NhmZxyrIysepOGs8L49XXyjZET5Z1i0K%2BaX3FTiVoTdbFPlxbkU3V1fhxc3n8P6Pm%2BuHMJJ%2FJtHny%2FD%2B8iG8vr65HzmReewZjONjfyQ1XiHXwHaTk3YTZZkMf20BVsJzopJ9ffJSH8aA4I06n8nGzqkmgoHbrZJjCN9AbiPZe%2BQxu%2FNPaOQYaczx3R7ntbwXJzKYNh9FSydsviyjy38B" style="width:100%;height:601px;"></iframe></li> <li><p>当其他的客户端收到同步的数据后，Web SDK将找到接收(通过 <code>accept</code> 方法)操作数据的第一个数据handler，并使用 <code>CollaborationDataHandler</code> 处理接收的数据，然后在屏幕上输出与客户端 A 相同的操作。</p> <iframe frameborder="0" src="https://viewer.diagrams.net/?highlight=0000ff&amp;nav=1&amp;title=#R7VrRctsoFP0az%2Bw%2BJCMJ27IfEzvdPnRnMs3utH3qEAnbbJHQIBzb%2B%2FV7sUBCgsSZREqzSV9scQEJzj3nckEaoUW2%2F0PgYvMnTwkbRUG6H6HlKIriMIZfZThUhgmKKsNa0LQyhY3hhv5LtDHQ1i1NSdlqKDlnkhZtY8LznCSyZcNC8F272Yqz9lMLvCaO4SbBzLV%2BoancVNZZFDf2j4SuN%2BbJ4XRe1WTYNNYzKTc45TvLhK5GaCE4l9VVtl8QprAzuFT9PtxTWw9MkFw%2BpsNYj%2BMOs62enB6YPJjZCr7NU6I6hCN0udtQSW4KnKjaHbgXbBuZMV2tb0eEJPt7xxTWMwWGEJ4RKQ7QxNAj0DhqdqC5HuSuwTqKUWXbWDhPdTus3buub90gABcaBD8g0Wk8cFlUpFrRvYLlsiCCwoOIABvcDVhIrhuTjQ5mdJ3DdQJQHOtq%2FwdQSHG5OeKsCiVATPP1XxwAXiIw0OzISvO%2FpNkaJsPoLfziRNI78j2lAkbG1Yw%2F7GgOdy6%2Fl0SAN87Lu3U%2F3gnHYcs74dT1jmliO2fSg3OM%2Fi1nkBSUqYtcyA1f8xyzq8Z62dBXwdq0%2BcSP0Cq3%2FEOkPOgwg7eS%2ByitHvQwZBCEsFgTbZr7URSEYeWrdkzyYKK7XnMKD2nQN1ow2hh3YC35ViRE9%2BogWw%2FjUWAjRwkLRslxMJeOG4DHhbrcZuxCMRBgUyyjEDM%2F4VvCrnlJJeWK%2B7dcSp5ZDS60KCTvxBK%2BlYzmZFFH8aAvCk%2FPJ20YI5fEKBgmwkxORxiD5oqR%2FYVar2DeJE%2F15TJhuCxpooIEME66ZgtDgEQcvirsYMq6%2BM2uW%2B41sFXpYEp7Kq1uUPpm1TSdVMHuYwU%2By12PEU%2FF3Bb3bD1FfpdaDpt4HGZsz5Wdw5ho%2FjjheRTs3Kqr4WrafWh4epprXl7ZBDJEsGlQk8JPhKc5%2FR4PPztittcrFD7VceMTofcetwG6%2BGA1K1SD8oEBh50FdjZ5eFyd9mZcDWuqETyVQ%2FHj41VGyrJKUnqJ4tOTko88kg%2FHvUj%2BLGy7%2Byxu34GvViV5rj5nDrbhOZQv0vQiz7nEaslccMbwLRfHwhJL7MAPGMo25qUU%2FAdAztRKvMx5rnyyoox1TE4%2B2l2TM5qmxyzKl%2Fa3MyuhxwvFeU8L9ZkByETKmWcnEHo4EPWwTs9P874NwPA7IzTphAbPzgiZgdt4oKCP7Dt0EIkUW1ew04C%2F9EjNYINzYIx4pSTtwQlR0Im3ntyxXiv6JmWI3AV8%2BB2QyQHCwXOAcJgkIA7awbxO7vtPuUL3BOEzyfgdaSK6CuIfK5mc4yQhhfxNief3ATTDyEr%2BdMWgaQd9j2LqrVXfivGlvG9JMdVeaXjFxIMpxnPS8HcBgvilmAZ9zyHbcIqJ37hiZi%2BiGGej2aNi3H1Da8vwmRTs8N41U%2Be8L6EZ8wLL3i0sotFl3Pp9nTnxABu3cdzxhe8lwVCu%2BN%2BkyM3ZrH0yax3U3nM2%2B7Swh%2FS5iH2oOg78buw5FI67fu0vFJpZ2a8pBPmVPNjohy8ZCN0j5xVmJXmlsa8HuKeok6t54B4s1rmHs%2B8N7ckLou2mXe8Nbc%2BB42Bouwew6Pyh2F6dPL7t2B5HPzG2j90k9wu5LXnyQ70IMV9bqUzyzQoinEVtQQyX2EKx%2BQ6syoyaj%2BnQ1X8%3D" style="width:100%;height:333px;"></iframe></li></ol> <p>至此，一个完整的协作操作过程已完成！</p> <h2 id="无线循环问题"><a href="#无线循环问题" class="header-anchor">#</a> 无线循环问题</h2> <p>查看以下代码，首先，注册 <code>DataEvent.annotationAdded</code> 事件，以便在事件触发后发送协作数据。然后，在一个button上注册一个单击事件，通过 <code>PDFPage.addAnnot</code> API创建注释。调用 <code>PDFPage.addAnnot</code> 方法将触发 <code>DataEvent.annotationAdded</code> 事件。这个逻辑看起来很完美。但是，假设此时有两个客户端 A 和 B。首先单击客户端 A 的按钮并发送协作数据，客户端 B 在收到协作数据后也调用 <code>PDFPage.addAnnot</code> 方法，然后问题就出现了。因为 <code>PDFPage.addAnnot</code> 触发了 <code>DataEvents.annotationAdded</code> 事件，事件回调函数也将发送协作数据，所有客户端在收到协作数据后将继续发送请求。在此过程中，无限循环问题就出现了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> DataEvents <span class="token operator">=</span> PDFViewCtrl<span class="token punctuation">.</span><span class="token constant">PDF</span><span class="token punctuation">.</span>DataEvents<span class="token punctuation">;</span>
pdfViewer<span class="token punctuation">.</span>eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>DataEvents<span class="token punctuation">.</span>annotationAdded<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annots</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> pdfViewer<span class="token punctuation">.</span><span class="token function">getCurrentPDFDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">exportAnnotsToJSON</span><span class="token punctuation">(</span>annots<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annotsJSONArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pdfViewer<span class="token punctuation">.</span><span class="token function">collaborate</span><span class="token punctuation">(</span>PDFViewCtrl<span class="token punctuation">.</span>collab<span class="token punctuation">.</span><span class="token constant">COLLABORATION_ACTION</span><span class="token punctuation">.</span><span class="token constant">CREATE_ANNOT</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">annots</span><span class="token operator">:</span> annotsJSONArray
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> $button <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#create-square-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$button<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> pdfViewer<span class="token punctuation">.</span><span class="token function">getCurrentPDFDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">getPageByIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        page<span class="token punctuation">.</span><span class="token function">addAnnot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rect</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">flags</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'square'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> $button <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#create-line-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$button<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> pdfViewer<span class="token punctuation">.</span><span class="token function">getCurrentPDFDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">getPageByIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        page<span class="token punctuation">.</span><span class="token function">addAnnot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">startStyle</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">endStyle</span><span class="token operator">:</span> <span class="token constant">PDF</span><span class="token punctuation">.</span>constant<span class="token punctuation">.</span>Ending_Style<span class="token punctuation">.</span>Square<span class="token punctuation">,</span>
            <span class="token literal-property property">startPoint</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">endPoint</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rect</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">100</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了避免该问题，需要从 <code>DataEvents</code> 回调中移除 <code>pdfViewer.collaborate</code> 的调用，并将其放置到单击事件回调中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> $button <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#create-square-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$button<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> pdfViewer<span class="token punctuation">.</span><span class="token function">getCurrentPDFDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">getPageByIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        page<span class="token punctuation">.</span><span class="token function">addAnnot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rect</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">flags</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'square'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annots</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> doc<span class="token punctuation">.</span><span class="token function">exportAnnotsToJSON</span><span class="token punctuation">(</span>annots<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annotsJSONArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pdfViewer<span class="token punctuation">.</span><span class="token function">collaborate</span><span class="token punctuation">(</span>PDFViewCtrl<span class="token punctuation">.</span>collab<span class="token punctuation">.</span><span class="token constant">COLLABORATION_ACTION</span><span class="token punctuation">.</span><span class="token constant">CREATE_ANNOT</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">annots</span><span class="token operator">:</span> annotsJSONArray
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> $button <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#create-line-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$button<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> pdfViewer<span class="token punctuation">.</span><span class="token function">getCurrentPDFDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">getPageByIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        page<span class="token punctuation">.</span><span class="token function">addAnnot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">startStyle</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">endStyle</span><span class="token operator">:</span> <span class="token constant">PDF</span><span class="token punctuation">.</span>constant<span class="token punctuation">.</span>Ending_Style<span class="token punctuation">.</span>Square<span class="token punctuation">,</span>
            <span class="token literal-property property">startPoint</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">endPoint</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rect</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">100</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annots</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> doc<span class="token punctuation">.</span><span class="token function">exportAnnotsToJSON</span><span class="token punctuation">(</span>annots<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annotsJSONArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pdfViewer<span class="token punctuation">.</span><span class="token function">collaborate</span><span class="token punctuation">(</span>PDFViewCtrl<span class="token punctuation">.</span>collab<span class="token punctuation">.</span><span class="token constant">COLLABORATION_ACTION</span><span class="token punctuation">.</span><span class="token constant">CREATE_ANNOT</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">annots</span><span class="token operator">:</span> annotsJSONArray
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/developer-guide/zh/main/features/custom-storage-driver.html" class="prev">
        自定义 StorageDriver
      </a></span> <span class="next"><a href="/docs/developer-guide/zh/main/best-practice.html">
        最佳实践
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/developer-guide/assets/js/app.5496d287.js" defer></script><script src="/docs/developer-guide/assets/js/2.cd9f3c75.js" defer></script><script src="/docs/developer-guide/assets/js/1.f6fc1d0f.js" defer></script><script src="/docs/developer-guide/assets/js/32.2690aeb9.js" defer></script>
  </body>
</html>
